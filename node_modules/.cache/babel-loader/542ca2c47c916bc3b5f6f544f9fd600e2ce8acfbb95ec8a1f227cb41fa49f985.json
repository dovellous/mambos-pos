{"ast":null,"code":"var _jsxFileName = \"/Users/inboxdev/Documents/GitHub/dovelous/apps/mambos/mambos-pos/src/pages/Login.tsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useNavigate, useNavigation, useLocation, useActionData, Form } from \"react-router-dom\";\nimport { loginUser } from \"../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport async function action(_ref) {\n  let {\n    request: any\n  } = _ref;\n  const formData = await request.formData();\n  const email = formData.get(\"email\");\n  const password = formData.get(\"password\");\n  try {\n    const data = await loginUser({\n      email,\n      password\n    });\n    localStorage.setItem(\"loggedin\", true);\n    return data;\n  } catch (err) {\n    return {\n      error: err.message\n    };\n  }\n}\nexport default function Login() {\n  _s();\n  var _location$state, _location$state2;\n  const data = useActionData();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const navigation = useNavigation();\n  const from = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.from) || \"/host\";\n  React.useEffect(() => {\n    if (data !== null && data !== void 0 && data.token) {\n      navigate(from, {\n        replace: true\n      });\n    }\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-container\",\n    children: [((_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.message) && /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"login-error\",\n      children: location.state.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Sign in to your account\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this), (data === null || data === void 0 ? void 0 : data.error) && /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"login-error\",\n      children: data.error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      action: \"/login\",\n      method: \"post\",\n      className: \"login-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"email\",\n        type: \"email\",\n        placeholder: \"Email address\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"password\",\n        type: \"password\",\n        placeholder: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: navigation.state === \"submitting\",\n        children: navigation.state === \"submitting\" ? \"Logging in...\" : \"Log in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"ifn3A5lcrLv0rDx0a2VBJCiwy40=\", false, function () {\n  return [useActionData, useLocation, useNavigate, useNavigation];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useNavigate","useNavigation","useLocation","useActionData","Form","loginUser","jsxDEV","_jsxDEV","action","_ref","request","any","formData","email","get","password","data","localStorage","setItem","err","error","message","Login","_s","_location$state","_location$state2","location","navigate","navigation","from","state","useEffect","token","replace","className","children","fileName","_jsxFileName","lineNumber","columnNumber","method","name","type","placeholder","disabled","_c","$RefreshReg$"],"sources":["/Users/inboxdev/Documents/GitHub/dovelous/apps/mambos/mambos-pos/src/pages/Login.tsx"],"sourcesContent":["import React from \"react\"\nimport { useNavigate, useNavigation, useLocation, useActionData, Form } from \"react-router-dom\"\nimport { loginUser } from \"../api\"\n\nexport async function action({ request:any }) {\n    const formData = await request.formData()\n    const email = formData.get(\"email\")\n    const password = formData.get(\"password\")\n    \n    try {\n        const data = await loginUser({email, password})\n        localStorage.setItem(\"loggedin\", true)\n        return data\n    } catch(err) {\n        return {\n            error: err.message\n        }\n    }\n}\n\nexport default function Login() {\n    const data = useActionData()\n    const location = useLocation()\n    const navigate = useNavigate()\n    const navigation = useNavigation()\n    const from = location.state?.from || \"/host\";\n    \n    React.useEffect(() => {\n        if (data?.token) {\n            navigate(from, { replace: true })\n        }\n    }, [data])\n    \n    return (\n        <div className=\"login-container\">\n            {\n                location.state?.message && \n                <h3 className=\"login-error\">{location.state.message}</h3>\n            }\n            <h1>Sign in to your account</h1>\n            {\n                data?.error && \n                <h3 className=\"login-error\">{data.error}</h3>\n            }\n            <Form \n                action=\"/login\" \n                method=\"post\"\n                className=\"login-form\"\n            >\n                <input\n                    name=\"email\"\n                    type=\"email\"\n                    placeholder=\"Email address\"\n                />\n                <input\n                    name=\"password\"\n                    type=\"password\"\n                    placeholder=\"Password\"\n                />\n                <button \n                    disabled={navigation.state === \"submitting\"}\n                >\n                    {navigation.state === \"submitting\" \n                        ? \"Logging in...\" \n                        : \"Log in\"\n                    }\n                </button>\n            </Form>\n        </div>\n    )\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}